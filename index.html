<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Launch Proxy Window</title>
  <style>
    body {
      background: #111;
      color: #fff;
      font-family: Arial, sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
    }

    input {
      width: 300px;
      padding: 10px;
      border: none;
      border-radius: 5px;
      margin-bottom: 10px;
      font-family: Arial, sans-serif;
    }

    button {
      padding: 10px 20px;
      background: #4caf50;
      border: none;
      color: white;
      border-radius: 5px;
      cursor: pointer;
      font-family: Arial, sans-serif;
    }

    footer {
      margin-top: 20px;
      font-size: 0.85em;
      color: #888;
      font-family: Arial, sans-serif;
    }

    a {
      color: #66ccff;
    }
  </style>
</head>
<body>
  <h2 style="font-family: Arial, sans-serif;">Jiyukuro Proxy Browser</h2>
  <input type="text" id="urlInput" placeholder="e.g. www.wikipedia.org (no https://)" />
  <button onclick="launchProxy()">Open in New Window</button>

  <footer>
    Proxy by <a href="https://github.com/sskaje/gspxy" target="_blank">sskaje</a>,
    UI by <a href="https://lelbois.nekoweb.org" target="_blank">lelbois</a>
  </footer>

  <script>
    function launchProxy() {
      const rawUrl = document.getElementById('urlInput').value.trim();
      const cleaned = rawUrl.replace(/^https?:\/\//, '');
      const proxyUrl = 'https://p.rst.im/q/' + cleaned;

      const popup = window.open('about:blank', '_blank');
      if (popup) {
        const doc = popup.document;
        doc.write(`
          <!DOCTYPE html>
          <html>
          <head>
            <title>Proxy</title>
            <style>
              html, body {
                margin: 0;
                padding: 0;
                height: 100%;
                overflow: hidden;
                font-family: Arial, sans-serif;
              }
              iframe {
                border: none;
                width: 100%;
                height: 100%;
              }
              #notice {
                position: absolute;
                top: 0;
                left: 0;
                background: rgba(0,0,0,0.6);
                color: white;
                font-size: 0.8em;
                padding: 4px 8px;
                z-index: 1000;
                font-family: Arial, sans-serif;
              }
              a {
                color: #66ccff;
              }
            </style>
          </head>
          <body>
            <div id="notice">Proxy by <a href="https://github.com/sskaje/gspxy" target="_blank">sskaje</a></div>
            <iframe src="${proxyUrl}" allowfullscreen></iframe>
          </body>
          </html>
        `);
        doc.close();
      } else {
        alert("Popup blocked! Please allow popups for this site.");
      }
    }
  </script>
</body>
</html>
